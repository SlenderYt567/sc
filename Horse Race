--!strict
--[[
    SlenderHub | V1 - Horse Race (Architect Edition V10)
    UI Library: SlenderWind Internal (V10 Standard)
    Access Level: Dynamic (Free/Premium)
    Refactored by: Chief Architect
]]

--// 1. SlenderHub Singleton Pattern
if getgenv().SlenderHubGameLoaded then 
    warn("[SlenderHub] Instance already active.") 
    return 
end
getgenv().SlenderHubGameLoaded = true

--// 2. Access Control
local AccessLevel = getgenv().SlenderHubAccessLevel or "Free" 
local IsPremium = (AccessLevel == "Premium")

--// 3. Load SlenderWind V10 (Internal Standard)
local SlenderWind = loadstring(game:HttpGet("https://raw.githubusercontent.com/SlenderYt567/sc/refs/heads/main/SlenderWindV5.lua"))()

--// 4. Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

--// 5. Remote Analysis (Knit Framework Hook)
local function GetRemote(ServiceName, RemoteName, IsFunction)
    local Remote = nil
    local success, err = pcall(function()
        local Knit = ReplicatedStorage:WaitForChild("Packages", 5):WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.5.1"):WaitForChild("knit"):WaitForChild("Services")
        local Service = Knit:FindFirstChild(ServiceName)
        if Service then
            local Folder = Service:FindFirstChild(IsFunction and "RF" or "RE")
            if Folder then Remote = Folder:FindFirstChild(RemoteName) end
        end
    end)
    return Remote
end

--// 6. Control Variables (Flags)
local Flags = {
    AutoWin = false, AutoWinOP = false, AutoTrain = false, AutoHatch = false, AutoBuy = false, 
    AutoClaimExclusive = false, AutoCrate = false, SpeedHack = false, Noclip = false, InfJump = false,
    TrainWorld = "1", TrainMachine = "1",
    SelectedEgg = "Egg_1_1", VendingItem = "WPN_101",
    SelectedArea = "Area_1", SelectedCrate = "Crate_1",
    WalkSpeedVal = 100
}

--// 7. UI Construction (V10)
local Window = SlenderWind.Window({
    Name = "SlenderHub | Horse Race [" .. string.upper(AccessLevel) .. "]",
    KeySystem = false,
    Theme = { 
        Accent = Color3.fromRGB(0, 255, 128),
        Background = Color3.fromRGB(15, 15, 20),
        Text = Color3.fromRGB(240, 240, 240)
    } 
})

--// =================================================================
--// TAB: PREMIUM OP
--// =================================================================
local TabOP = Window:Tab("Premium OP")

if IsPremium then
    TabOP:Label("--- Blatant Farming ---")
    
    TabOP:Toggle("âš¡ SUPER Auto Win (5x)", false, "AutoWinOP", "Extreme speed win farming", function(Value)
        Flags.AutoWinOP = Value
        local Remote = GetRemote("FightService", "GetWinsEvent", false)
        local Vector = Vector3.new(1811.09, 782.79, -689544.81)
        
        task.spawn(function()
            while Flags.AutoWinOP do
                if Remote then 
                    for i = 1, 5 do
                        pcall(function() Remote:FireServer("WinGate_16", Vector) end)
                    end
                else 
                    Remote = GetRemote("FightService", "GetWinsEvent", false) 
                end
                task.wait(0.01)
            end
        end)
    end)

    TabOP:Label("--- Character Exploits ---")

    TabOP:Toggle("Speed Hack", false, "SpeedHack", "Bypasses loop checks", function(Value)
        Flags.SpeedHack = Value
        task.spawn(function()
            while Flags.SpeedHack and task.wait() do
                pcall(function()
                    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                        LocalPlayer.Character.Humanoid.WalkSpeed = Flags.WalkSpeedVal
                    end
                end)
            end
            pcall(function() LocalPlayer.Character.Humanoid.WalkSpeed = 16 end)
        end)
    end)

    TabOP:Slider("Speed Value", 16, 500, 100, "WalkSpeedVal", "Adjust movement speed", function(Value)
        Flags.WalkSpeedVal = Value
    end)

    TabOP:Toggle("Noclip", false, "Noclip", "Walk through walls", function(Value)
        Flags.Noclip = Value
        if Flags.Noclip then
            RunService:BindToRenderStep("SlenderNoclip", 1000, function()
                if LocalPlayer.Character then
                    for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                        if part:IsA("BasePart") then part.CanCollide = false end
                    end
                end
            end)
        else
            RunService:UnbindFromRenderStep("SlenderNoclip")
        end
    end)

    TabOP:Toggle("Infinite Jump", false, "InfJump", "Jump in mid-air", function(Value)
        Flags.InfJump = Value
    end)
    
    UserInputService.JumpRequest:Connect(function()
        if Flags.InfJump and LocalPlayer.Character then
            LocalPlayer.Character:FindFirstChildOfClass('Humanoid'):ChangeState("Jumping")
        end
    end)

else
    TabOP:Label("--- LOCKED ---")
    TabOP:Button("ðŸ”’ Unlock OP Features", "Requires Premium Key", function()
        -- Notification handled by UI lib usually, or print
        print("Visit SlenderHub.shop")
    end)
end

--// =================================================================
--// TAB: FARM
--// =================================================================
local TabFarm = Window:Tab("Farm")

TabFarm:Label("--- Legit Farm ---")

TabFarm:Toggle("Auto Win (Legit)", false, "AutoWin", "Normal speed farming", function(Value)
    Flags.AutoWin = Value
    local Remote = GetRemote("FightService", "GetWinsEvent", false)
    local Vector = Vector3.new(1811.09, 782.79, -689544.81)
    
    task.spawn(function()
        while Flags.AutoWin and task.wait(0.1) do
            if Remote then 
                pcall(function() Remote:FireServer("WinGate_16", Vector) end)
            else 
                Remote = GetRemote("FightService", "GetWinsEvent", false) 
            end
        end
    end)
end)

TabFarm:Label("--- Auto Train ---")

TabFarm:Dropdown("World", {"1","2","3","4","5"}, "1", "TrainWorld", "Select Training World", function(val)
    Flags.TrainWorld = val
end)

TabFarm:Dropdown("Machine", {"1","2","3","4","5","6","7","8","9","10","11","12"}, "1", "TrainMachine", "Select Machine Tier", function(val)
    Flags.TrainMachine = val
end)

TabFarm:Toggle("Enable Auto Train", false, "AutoTrain", "Start training loop", function(Value)
    Flags.AutoTrain = Value
    local Remote = GetRemote("TrainService", "RunTrain", false)
    task.spawn(function()
        while Flags.AutoTrain and task.wait() do
            if Remote then
                pcall(function() Remote:FireServer("Treadmill_"..Flags.TrainWorld.."_"..Flags.TrainMachine) end)
            else Remote = GetRemote("TrainService", "RunTrain", false) end
        end
    end)
end)

--// =================================================================
--// TAB: TELEPORT
--// =================================================================
local TabTP = Window:Tab("Teleport")
local Areas = { "Area_1", "Area_2", "Area_3", "Area_4", "Area_5", "Area_Christmas", "Area_Fruit" }

TabTP:Label("--- Zone Teleport ---")

TabTP:Dropdown("Select Area", Areas, "Area_1", "SelectedArea", "Destination", function(val)
    Flags.SelectedArea = val
end)

TabTP:Button("Teleport Now", "Instant TP to selected area", function()
    local TargetArea = Flags.SelectedArea
    local Remote = GetRemote("AreaService", "UpdatePlayerCurrentArea", false)
    if Remote then pcall(function() Remote:FireServer(TargetArea) end) end

    pcall(function()
        local Root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if Root then
            local TargetObj = workspace:FindFirstChild(TargetArea) 
                           or (workspace:FindFirstChild("Spawns") and workspace.Spawns:FindFirstChild(TargetArea))
                           or (workspace:FindFirstChild("Map") and workspace.Map:FindFirstChild(TargetArea))
            if TargetObj then
                local TargetCFrame = TargetObj:IsA("Model") and TargetObj:GetPivot() or TargetObj.CFrame
                Root.CFrame = TargetCFrame + Vector3.new(0, 5, 0)
            end
        end
    end)
end)

--// =================================================================
--// TAB: EGGS
--// =================================================================
local TabEggs = Window:Tab("Eggs")
local EggIDs = { "Egg_1_1", "Egg_1_2", "Egg_1_3", "Egg_1_4", "Egg_2_1", "Egg_2_2", "Egg_2_3", "Egg_2_4", "Egg_3_1", "Egg_3_2", "Egg_3_3", "Egg_3_4", "Egg_4_1", "Egg_4_2", "Egg_4_3", "Egg_Tower_1", "Egg_Christmas" }

TabEggs:Dropdown("Select Egg", EggIDs, "Egg_1_1", "SelectedEgg", "Egg to hatch", function(val)
    Flags.SelectedEgg = val
end)

TabEggs:Toggle("Auto Hatch", false, "AutoHatch", "Fast hatch mode", function(Value)
    Flags.AutoHatch = Value
    local Remote = GetRemote("EggHatchService", "Hatch", false)
    task.spawn(function()
        while Flags.AutoHatch do
            if Remote then pcall(function() Remote:FireServer(Flags.SelectedEgg, 1) end)
            else Remote = GetRemote("EggHatchService", "Hatch", false) end
            task.wait(0.25)
        end
    end)
end)

TabEggs:Label("--- Premium Rewards ---")

if IsPremium then
    TabEggs:Toggle("Auto Claim Exclusive", false, "AutoClaimExclusive", "Claims online rewards", function(Value)
        Flags.AutoClaimExclusive = Value
        local Remote = GetRemote("OnlineRewardService", "ClaimOnlineQuestReward", true)
        task.spawn(function()
            while Flags.AutoClaimExclusive do
                if Remote then pcall(function() Remote:InvokeServer() end)
                else Remote = GetRemote("OnlineRewardService", "ClaimOnlineQuestReward", true) end
                task.wait(5)
            end
        end)
    end)
else
    TabEggs:Button("ðŸ”’ Auto Exclusive Egg", "Premium Only", function() end)
end

--// =================================================================
--// TAB: SHOP
--// =================================================================
local TabShop = Window:Tab("Shop")
local VendingItems = { "WPN_101", "WPN_102", "Potion_DoubleWins", "Potion_SuperLucky", "KingSlime" }

TabShop:Label("--- Vending Machine ---")

TabShop:Dropdown("Item", VendingItems, "WPN_101", "VendingItem", "Item to buy", function(val)
    Flags.VendingItem = val
end)

TabShop:Toggle("Auto Buy Item", false, "AutoBuy", "Spam purchase", function(Value)
    Flags.AutoBuy = Value
    local Remote = GetRemote("PurchaseService", "PromptPurchase", false)
    task.spawn(function()
        while Flags.AutoBuy and task.wait(0.5) do
            if Remote then pcall(function() Remote:Fire(Flags.VendingItem) end)
            else Remote = GetRemote("PurchaseService", "PromptPurchase", false) end
        end
    end)
end)

TabShop:Label("--- Premium Crates ---")

if IsPremium then
    TabShop:Dropdown("Select Crate", {"Crate_1", "Crate_2"}, "Crate_1", "SelectedCrate", "Crate type", function(val)
        Flags.SelectedCrate = val
    end)

    TabShop:Toggle("Auto Open Crate", false, "AutoCrate", "OP Unboxing", function(Value)
        Flags.AutoCrate = Value
        local Remote = GetRemote("ItemCrateService", "UnboxCrate", false)
        task.spawn(function()
            while Flags.AutoCrate and task.wait(0.5) do
                if Remote then pcall(function() Remote:FireServer(Flags.SelectedCrate) end)
                else Remote = GetRemote("ItemCrateService", "UnboxCrate", false) end
            end
        end)
    end)
else
    TabShop:Button("ðŸ”’ Auto Open Crate", "Premium Only", function() end)
end

--// =================================================================
--// TAB: MISC
--// =================================================================
local TabMisc = Window:Tab("Misc")

TabMisc:Button("Anti-AFK (Low Render)", "Prevents kick & lowers CPU", function()
    RunService:Set3dRenderingEnabled(false)
    LocalPlayer.Idled:connect(function()
        VirtualUser:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
        wait(1)
        VirtualUser:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    end)
end)

TabMisc:Button("Restore Rendering", "Fixes graphics", function()
    RunService:Set3dRenderingEnabled(true)
end)

--// End
print("[SlenderHub] V10 Loaded.")
