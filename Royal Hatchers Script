local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/SlenderYt567/sc/refs/heads/main/SlenderWind.lua"))()

-- Espera o jogo carregar
repeat task.wait() until game:IsLoaded()

-- Serviços do Roblox
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer

-- Variáveis de Controle globais (getgenv)
local getgenv = getgenv or function() return _G end
getgenv().AutoClick = false
getgenv().AutoEgg = false
getgenv().SelectedEgg = "Common Egg"
getgenv().EggAmount = 100
getgenv().AutoMerchant = false
getgenv().AutoCollect = false
getgenv().AutoUpgrade = false
getgenv().SelectedUpgrade = "Coins1"
getgenv().AntiAFKMovement = false
getgenv().AutoCreateClan = false
getgenv().ClanNameToCreate = "SlenderHub Clan" -- Nome de clã padrão
getgenv().AutoAcceptInvites = false
getgenv().AutoLeaveClan = false
getgenv().WalkSpeed = 16 -- Adicionado para armazenar o valor do WalkSpeed
getgenv().JumpPower = 50  -- Adicionado para armazenar o valor do JumpPower

-- Anti-AFK padrão (desabilita o evento de ociosidade do jogador)
for _, con in pairs(getconnections(LocalPlayer.Idled)) do
    con:Disable()
end

-- Espera pelos remotes necessários ANTES de criar a GUI para evitar que a GUI não apareça devido a yield
local Remotes = ReplicatedStorage:WaitForChild("Remotes", 10)
local Functions = Remotes:WaitForChild("Functions", 10)
local Events = Remotes:WaitForChild("Events", 10)

-- Remotes específicos
local ClickRemote = Functions:WaitForChild("Click", 10)
local CollectCollectibleRemote = Functions:WaitForChild("CollectCollectible", 10)
local BuyEggRemote = Functions:WaitForChild("BuyEgg", 10)
local BuyMerchantRemote = Functions:WaitForChild("BuyMerchant", 10)
local BuyUpgradeRemote = Functions:WaitForChild("BuyUpgrade", 10)
local ClanRemote = Functions:WaitForChild("ClanInvoke", 10) -- Remote para operações de clã

-- Eventos específicos
local LoadCollectiblesEvent = Events:WaitForChild("LoadCollectibles", 10)
local UpdateClansEvent = Events:WaitForChild("UpdateClans", 10) -- Evento para atualizações de clãs, incluindo convites

-- Tabelas de Dados extraídas da sua Dex (ATUALIZADAS)
local AllEggs = {
    "Common Egg", "Spotted Egg", "Rocky Egg", "Mushroom Egg", "Leaf Egg",
    "Arctic Egg", "Icy Egg", "Release Egg", "Lovely Egg", "Valentines Egg",
    "100K Egg", "Desert Egg", "Fiery Egg", "Magma Egg", "500K Egg",
    "Crystal Egg", "Floral Egg", "Mystical Egg", "Season 1 Egg",
    "Bounty Pets", "Exclusive Pets"
}

local AllUpgrades = {
    "Coins1", "EggHatch1", "Gems1", "HatchSpeed1", "Coins2", "Luck1",
    "Shiny1", "HatchSpeed2", "Coins3", "Gems2", "Luck2", "Shiny2",
    "Hatcher1", "Shiny3", "Coins4", "Luck3", "EggHatch2", "Shiny4",
    "Coins5", "Luck4", "EggHatch3", "HiddenLuck", "HiddenShinyLuck", "HiddenHatchSpeed"
}

--========================================================--
--                  CARREGANDO SLENDERWIND UI             --
--========================================================--
-- Mudança de Rayfield para SlenderWind V10 Obsidian Edition, conforme suas instruções.
-- SlenderWind é mais otimizado para a plataforma SlenderHub e deve resolver problemas de renderização.
local Window = Library.Window({ Name = "SlenderHub | Royal Hatchers", KeySystem = false })

--================= TABS =================--
-- SlenderWind usa Window:Tab("Nome da Aba")
local FarmingTab = Window:Tab("Farming")
local EggsTab = Window:Tab("Eggs")
local ShopUpgradesTab = Window:Tab("Shop & Upgrades")
local ClansTab = Window:Tab("Clans")
local PlayerTab = Window:Tab("Player")

--================= FARMING TAB =================--
FarmingTab:Toggle("Auto Click", getgenv().AutoClick, function(Value)
    getgenv().AutoClick = Value
    print("SlenderHub: Auto Click Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AutoClick do
                local success, err = pcall(function()
                    ClickRemote:InvokeServer()
                end)
                if not success then
                    warn("SlenderHub: Auto Click failed:", err)
                end
                task.wait() -- Sem delay para máxima velocidade de click
            end
        end)
    end
end)

-- Implementação melhorada do Auto Collectibles, usando o Remote "CollectCollectible"
local collectibleIdsToCollect = {} -- Armazena os IDs dos coletáveis para coleta

-- Escuta o evento LoadCollectibles para popular a lista de IDs
LoadCollectiblesEvent.OnClientEvent:Connect(function(collectiblesData)
    -- Limpa a lista existente antes de popular com novos dados, se necessário
    collectibleIdsToCollect = {} 
    for _, data in pairs(collectiblesData) do
        table.insert(collectibleIdsToCollect, data.ID)
    end
    print("SlenderHub: Loaded", #collectibleIdsToCollect, "collectibles.")
end)

FarmingTab:Toggle("Auto Collectibles (Gems/Drops)", getgenv().AutoCollect, function(Value)
    getgenv().AutoCollect = Value
    print("SlenderHub: Auto Collectibles Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AutoCollect do
                if #collectibleIdsToCollect > 0 then
                    local success, err = pcall(function()
                        for i = #collectibleIdsToCollect, 1, -1 do
                            local collectibleID = collectibleIdsToCollect[i]
                            CollectCollectibleRemote:InvokeServer(collectibleID)
                            table.remove(collectibleIdsToCollect, i)
                            -- print("SlenderHub: Collecting item with ID:", collectibleID) -- Descomente para debug intenso
                        end
                    end)
                    if not success then
                        warn("SlenderHub: Auto Collectibles failed:", err)
                    end
                else
                    -- print("SlenderHub: No collectibles to collect.") -- Descomente para debug
                end
                task.wait(0.2) -- Pequeno delay para evitar spam excessivo no servidor e dar tempo para o evento LoadCollectibles
            end
        end)
    end
end)

--================= EGGS TAB =================--
-- SlenderWind Dropdown: (Nome, Opções, Valor Atual, Callback)
EggsTab:Dropdown("Select Egg", AllEggs, getgenv().SelectedEgg, function(SelectedText)
    getgenv().SelectedEgg = SelectedText
    print("SlenderHub: Selected Egg:", SelectedText)
end)

-- SlenderWind Slider: (Nome, Min, Max, Valor Atual, Callback, Suffix, Increment)
EggsTab:Slider("Amount to Open", 1, 100, getgenv().EggAmount, function(Value)
    getgenv().EggAmount = Value
    print("SlenderHub: Egg Amount set to:", Value)
end, " Eggs", 1)

EggsTab:Toggle("Auto Hatch", getgenv().AutoEgg, function(Value)
    getgenv().AutoEgg = Value
    print("SlenderHub: Auto Hatch Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AutoEgg do
                local success, err = pcall(function()
                    -- A maioria dos jogos espera o NOME do ovo (string), não a instância.
                    -- Mudei para passar diretamente o getgenv().SelectedEgg (string).
                    BuyEggRemote:InvokeServer(getgenv().SelectedEgg, getgenv().EggAmount)
                    print("SlenderHub: Attempting to hatch", getgenv().EggAmount, "of", getgenv().SelectedEgg)
                end)
                if not success then
                    warn("SlenderHub: Auto Hatch failed:", err)
                end
                task.wait(0.1) -- Pequeno delay para segurança e evitar rate-limits
            end
        end)
    end
end)

--================= SHOP & UPGRADES TAB =================--
ShopUpgradesTab:Toggle("Auto Buy Merchant (All Items)", getgenv().AutoMerchant, function(Value)
    getgenv().AutoMerchant = Value
    print("SlenderHub: Auto Buy Merchant Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AutoMerchant do
                local success, err = pcall(function()
                    -- Compra todos os 15 slots (assumindo que o merchant sempre tem 15 slots)
                    -- O primeiro argumento "Merchant" é uma suposição para o ID do comerciante.
                    for i = 1, 15 do
                        BuyMerchantRemote:InvokeServer("Merchant", i)
                        -- print("SlenderHub: Attempting to buy merchant item slot:", i) -- Descomente para debug intenso
                    end
                end)
                if not success then
                    warn("SlenderHub: Auto Buy Merchant failed:", err)
                end
                task.wait(2) -- Delay de 2s para não dar spam excessivo e respeitar cooldowns do servidor
            end
        end)
    end
end)

ShopUpgradesTab:Dropdown("Select Upgrade", AllUpgrades, getgenv().SelectedUpgrade, function(SelectedText)
    getgenv().SelectedUpgrade = SelectedText
    print("SlenderHub: Selected Upgrade:", SelectedText)
end)

ShopUpgradesTab:Toggle("Auto Buy Upgrade", getgenv().AutoUpgrade, function(Value)
    getgenv().AutoUpgrade = Value
    print("SlenderHub: Auto Buy Upgrade Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AutoUpgrade do
                local success, err = pcall(function()
                    -- A maioria dos jogos espera o NOME do upgrade (string).
                    BuyUpgradeRemote:InvokeServer(getgenv().SelectedUpgrade)
                    print("SlenderHub: Attempting to buy upgrade:", getgenv().SelectedUpgrade)
                end)
                if not success then
                    warn("SlenderHub: Auto Buy Upgrade failed:", err)
                end
                task.wait(1) -- Delay para evitar spam excessivo
            end
        end)
    end
end)

--================= CLANS TAB =================--
ClansTab:Input("Clan Name to Create", getgenv().ClanNameToCreate, function(Value)
    getgenv().ClanNameToCreate = Value
    print("SlenderHub: Clan Name to Create set to:", Value)
end)

ClansTab:Toggle("Auto Create Clan", getgenv().AutoCreateClan, function(Value)
    getgenv().AutoCreateClan = Value
    print("SlenderHub: Auto Create Clan Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AutoCreateClan do
                -- Verifica se já estamos em um clã antes de tentar criar
                if not LocalPlayer:GetAttribute("Clan") then
                    local success, result = pcall(function()
                        return ClanRemote:InvokeServer("CreateClan", getgenv().ClanNameToCreate)
                    end)
                    if success then
                        if result == true then
                            warn("SlenderHub: Clã criado com sucesso:", getgenv().ClanNameToCreate)
                            getgenv().AutoCreateClan = false -- Desativa após criar com sucesso
                        elseif type(result) == "string" then
                            warn("SlenderHub: Falha ao criar clã:", result)
                        else
                             warn("SlenderHub: Falha ao criar clã: Unknown error (returned type:", type(result), ")")
                        end
                    else
                        warn("SlenderHub: pcall failed for CreateClan:", result)
                    end
                else
                    warn("SlenderHub: Já está em um clã. Desativando Auto Create Clan.")
                    getgenv().AutoCreateClan = false -- Desativa se já estiver em um clã
                end
                task.wait(5) -- Espera um pouco antes de tentar novamente
            end
        end)
    end
end)

-- Conecta ao evento de convites de clã UMA VEZ para evitar múltiplas conexões
UpdateClansEvent.OnClientEvent:Connect(function(eventType, data)
    if getgenv().AutoAcceptInvites and eventType == "InvitesUpdate" and data then
        print("SlenderHub: Received clan invites update. Invites:", data)
        for _, clanName in pairs(data) do
            local success, result = pcall(function()
                return ClanRemote:InvokeServer("JoinClan", clanName)
            end)
            if success then
                if result == true then
                    warn("SlenderHub: Convite para o clã '" .. clanName .. "' aceito com sucesso!")
                elseif type(result) == "string" then
                    warn("SlenderHub: Falha ao aceitar convite para o clã '" .. clanName .. "':", result)
                else
                    warn("SlenderHub: Falha ao aceitar convite para o clã '" .. clanName .. "': Unknown error (returned type:", type(result), ")")
                end
            else
                warn("SlenderHub: pcall failed for JoinClan:", result)
            end
            task.wait(0.5) -- Pequeno delay entre aceitar convites
        end
    end
end)

ClansTab:Toggle("Auto Accept Clan Invites", getgenv().AutoAcceptInvites, function(Value)
    getgenv().AutoAcceptInvites = Value
    print("SlenderHub: Auto Accept Clan Invites Toggled:", Value)
end)

ClansTab:Toggle("Auto Leave/Delete Clan", getgenv().AutoLeaveClan, function(Value)
    getgenv().AutoLeaveClan = Value
    print("SlenderHub: Auto Leave/Delete Clan Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AutoLeaveClan do
                task.wait(1)
                -- Verifica se o jogador está em um clã
                if LocalPlayer:GetAttribute("Clan") then
                    local success, result = pcall(function()
                        return ClanRemote:InvokeServer("LeaveClan")
                    end)
                    if success then
                        if result == true then
                            warn("SlenderHub: Clã deixado/deletado com sucesso.")
                        elseif type(result) == "string" then
                            warn("SlenderHub: Falha ao deixar/deletar clã:", result)
                        else
                            warn("SlenderHub: Falha ao deixar/deletar clã: Unknown error (returned type:", type(result), ")")
                        end
                    else
                        warn("SlenderHub: pcall failed for LeaveClan:", result)
                    end
                else
                    -- print("SlenderHub: Not in a clan to leave.") -- Descomente para debug
                end
            end
        end)
    end
end)


--================= PLAYER TAB =================--
PlayerTab:Slider("WalkSpeed", 16, 200, getgenv().WalkSpeed, function(Value)
    getgenv().WalkSpeed = Value -- Armazena o valor globalmente
    local char = LocalPlayer.Character
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.WalkSpeed = Value
        print("SlenderHub: WalkSpeed set to:", Value)
    end
end, " WS", 1)

PlayerTab:Slider("JumpPower", 50, 300, getgenv().JumpPower, function(Value)
    getgenv().JumpPower = Value -- Armazena o valor globalmente
    local char = LocalPlayer.Character
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.JumpPower = Value
        hum.UseJumpPower = true -- Garante que o JumpPower seja usado
        print("SlenderHub: JumpPower set to:", Value)
    end
end, " JP", 1)

PlayerTab:Toggle("Anti-AFK (Jump a cada 5 minutos)", getgenv().AntiAFKMovement, function(Value)
    getgenv().AntiAFKMovement = Value
    print("SlenderHub: Anti-AFK (Jump) Toggled:", Value)
    if Value then
        task.spawn(function()
            while getgenv().AntiAFKMovement do
                task.wait(300) -- Espera 5 minutos (300 segundos)
                if getgenv().AntiAFKMovement then
                    local char = LocalPlayer.Character
                    local hum = char and char:FindFirstChildOfClass("Humanoid")
                    if hum and hum.Health > 0 then
                        -- Simula um pequeno pulo para manter a atividade
                        hum.Jump = true
                        task.wait(0.1)
                        hum.Jump = false
                        print("SlenderHub: Performed Anti-AFK jump.")
                    end
                end
            end
        end)
    end
end)

-- Função para aplicar WalkSpeed e JumpPower ao Humanoid
local function applyPlayerStats(character)
    local humanoid = character:WaitForChild("Humanoid", 5)
    if humanoid then
        humanoid.WalkSpeed = getgenv().WalkSpeed
        humanoid.JumpPower = getgenv().JumpPower
        humanoid.UseJumpPower = true
        print("SlenderHub: Applied WalkSpeed", getgenv().WalkSpeed, "and JumpPower", getgenv().JumpPower, "to new character.")
    else
        warn("SlenderHub: Humanoid not found in new character for stat application.")
    end
end

-- Conecta para aplicar WalkSpeed/JumpPower sempre que o personagem for adicionado/respawna
LocalPlayer.CharacterAdded:Connect(applyPlayerStats)

-- Aplica as stats se o personagem já existir no momento da execução do script
if LocalPlayer.Character then
    applyPlayerStats(LocalPlayer.Character)
end
