--[[
    SlenderHub | V1 - Horse Race (Architect Edition)
    UI Library: SlenderWind V6 (Cloud Hosted)
    Access Level: Dynamic (Free/Premium)
]]

-- 1. SlenderHub Singleton Pattern
if getgenv().SlenderHubLoaded then 
    warn("SlenderHub V1 Already Running") 
    return 
end
getgenv().SlenderHubLoaded = true

-- 2. Check Access Level
local AccessLevel = getgenv().SlenderHubAccessLevel or "Free" 
local IsPremium = (AccessLevel == "Premium")

-- 3. Load SlenderWind Library (GitHub)
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/SlenderYt567/sc/refs/heads/main/SlenderWindV5.lua"))()

-- 4. Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

-- 5. Remote Analysis (Knit Framework Hook)
local function GetRemote(ServiceName, RemoteName, IsFunction)
    local Remote = nil
    pcall(function()
        local Knit = ReplicatedStorage.Packages._Index["sleitnick_knit@1.5.1"].knit.Services
        local Service = Knit:FindFirstChild(ServiceName)
        if Service then
            local Folder = Service:FindFirstChild(IsFunction and "RF" or "RE")
            if Folder then Remote = Folder:FindFirstChild(RemoteName) end
        end
    end)
    return Remote
end

-- 6. Control Variables
local Flags = {
    AutoWin = false, AutoWinOP = false, AutoTrain = false, AutoHatch = false, AutoBuy = false, 
    AutoClaimExclusive = false, AutoCrate = false, SpeedHack = false, Noclip = false, InfJump = false,
    TrainWorld = "1", TrainMachine = "1",
    SelectedEgg = "Egg_1_1", VendingItem = "WPN_101",
    SelectedArea = "Area_1", SelectedCrate = "Crate_1",
    WalkSpeedVal = 100
}

-- 7. UI Construction
local HubTitle = "SlenderHub | Horse Race [" .. string.upper(AccessLevel) .. "]"

local Window = Library.Window({
   Name = HubTitle,
   Keybind = Enum.KeyCode.RightControl,
   KeySystem = false -- Defina como true se quiser ativar a Key no futuro
})

-- Ativar HUD
Window:Watermark({ Enabled = true, Title = HubTitle })

-- =================================================================
-- TAB: PREMIUM OP (ONLY VISIBLE/ACTIVE FOR PREMIUM)
-- =================================================================
if IsPremium then
    local TabOP = Window:Tab("Premium OP", "rbxassetid://3926305904")
    
    TabOP:Section("Blatant Farming")
    
    TabOP:Toggle("âš¡ SUPER Auto Win (5x Speed)", false, function(Value)
        Flags.AutoWinOP = Value
        local Remote = GetRemote("FightService", "GetWinsEvent", false)
        local Vector = Vector3.new(1811.09, 782.79, -689544.81)
        
        task.spawn(function()
            while Flags.AutoWinOP do
                if Remote then 
                    -- OP LOGIC: Fire multiple times per frame
                    for i = 1, 5 do
                        pcall(function() Remote:FireServer("WinGate_16", Vector) end)
                    end
                else 
                    Remote = GetRemote("FightService", "GetWinsEvent", false) 
                end
                task.wait(0.01) -- Extreme Speed
            end
        end)
    end)

    TabOP:Section("Character Exploits")

    TabOP:Toggle("Speed Hack (Loop Bypass)", false, function(Value)
        Flags.SpeedHack = Value
        task.spawn(function()
            while Flags.SpeedHack and task.wait() do
                pcall(function()
                    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                        LocalPlayer.Character.Humanoid.WalkSpeed = Flags.WalkSpeedVal
                    end
                end)
            end
            pcall(function() LocalPlayer.Character.Humanoid.WalkSpeed = 16 end)
        end)
    end)

    TabOP:Slider("Speed Value", 16, 500, 100, function(Value)
        Flags.WalkSpeedVal = Value
    end)

    TabOP:Toggle("Noclip (Walk Through Walls)", false, function(Value)
        Flags.Noclip = Value
        if Flags.Noclip then
            RunService:BindToRenderStep("SlenderNoclip", 1000, function()
                if LocalPlayer.Character then
                    for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                        if part:IsA("BasePart") then part.CanCollide = false end
                    end
                end
            end)
        else
            RunService:UnbindFromRenderStep("SlenderNoclip")
        end
    end)

    TabOP:Toggle("Infinite Jump", false, function(Value)
        Flags.InfJump = Value
    end)
    
    -- Logic for InfJump (Connected once)
    UserInputService.JumpRequest:Connect(function()
        if Flags.InfJump and LocalPlayer.Character then
            LocalPlayer.Character:FindFirstChildOfClass('Humanoid'):ChangeState("Jumping")
        end
    end)

else
    -- Placeholder for Free Users
    local TabOP = Window:Tab("Premium ðŸ”’", "rbxassetid://3926305904")
    TabOP:Button("ðŸ”’ Unlock OP Features", function()
        Library:Notify("Premium Required", "Get a key at SlenderHub.shop", 3)
    end)
end

-- =================================================================
-- TAB: FARM (NORMAL)
-- =================================================================
local TabFarm = Window:Tab("Farm", "rbxassetid://3926305904")

TabFarm:Section("Legit Farm")
TabFarm:Toggle("Auto Win (Normal Speed)", false, function(Value)
    Flags.AutoWin = Value
    local Remote = GetRemote("FightService", "GetWinsEvent", false)
    local Vector = Vector3.new(1811.09, 782.79, -689544.81)
    
    task.spawn(function()
        while Flags.AutoWin and task.wait(0.1) do
            if Remote then 
                pcall(function() Remote:FireServer("WinGate_16", Vector) end)
            else 
                Remote = GetRemote("FightService", "GetWinsEvent", false) 
            end
        end
    end)
end)

TabFarm:Section("Auto Train")

TabFarm:Dropdown("Mundo (World)", {"1","2","3","4","5"}, "1", function(val)
    Flags.TrainWorld = val
end)

TabFarm:Dropdown("MÃ¡quina (Machine)", {"1","2","3","4","5","6","7","8","9","10","11","12"}, "1", function(val)
    Flags.TrainMachine = val
end)

TabFarm:Toggle("Ativar Treino (Auto Train)", false, function(Value)
    Flags.AutoTrain = Value
    local Remote = GetRemote("TrainService", "RunTrain", false)
    task.spawn(function()
        while Flags.AutoTrain and task.wait() do
            if Remote then
                pcall(function() Remote:FireServer("Treadmill_"..Flags.TrainWorld.."_"..Flags.TrainMachine) end)
            else Remote = GetRemote("TrainService", "RunTrain", false) end
        end
    end)
end)

-- =================================================================
-- TAB: TELEPORT
-- =================================================================
local TabTP = Window:Tab("Teleport", "rbxassetid://3926305904")
local Areas = { "Area_1", "Area_2", "Area_3", "Area_4", "Area_5", "Area_Christmas", "Area_Fruit" }

TabTP:Section("Zone Teleport")

TabTP:Dropdown("Selecionar Area", Areas, "Area_1", function(val)
    Flags.SelectedArea = val
end)

TabTP:Button("Teleportar Agora", function()
    local TargetArea = Flags.SelectedArea
    local Remote = GetRemote("AreaService", "UpdatePlayerCurrentArea", false)
    if Remote then pcall(function() Remote:FireServer(TargetArea) end) end

    pcall(function()
        local Root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if Root then
            local TargetObj = workspace:FindFirstChild(TargetArea) 
                           or (workspace:FindFirstChild("Spawns") and workspace.Spawns:FindFirstChild(TargetArea))
                           or (workspace:FindFirstChild("Map") and workspace.Map:FindFirstChild(TargetArea))
            if TargetObj then
                local TargetCFrame = TargetObj:IsA("Model") and TargetObj:GetPivot() or TargetObj.CFrame
                Root.CFrame = TargetCFrame + Vector3.new(0, 5, 0)
                Library:Notify("Teleport", "Teleportado para: " .. TargetArea, 2)
            end
        end
    end)
end)

-- =================================================================
-- TAB: EGGS
-- =================================================================
local TabEggs = Window:Tab("Eggs", "rbxassetid://3926305904")
local EggIDs = { "Egg_1_1", "Egg_1_2", "Egg_1_3", "Egg_1_4", "Egg_2_1", "Egg_2_2", "Egg_2_3", "Egg_2_4", "Egg_3_1", "Egg_3_2", "Egg_3_3", "Egg_3_4", "Egg_4_1", "Egg_4_2", "Egg_4_3", "Egg_Tower_1", "Egg_Christmas" }

TabEggs:Dropdown("Escolher Ovo", EggIDs, "Egg_1_1", function(val)
    Flags.SelectedEgg = val
end)

TabEggs:Toggle("Auto Hatch (Fast)", false, function(Value)
    Flags.AutoHatch = Value
    local Remote = GetRemote("EggHatchService", "Hatch", false)
    task.spawn(function()
        while Flags.AutoHatch do
            if Remote then pcall(function() Remote:FireServer(Flags.SelectedEgg, 1) end)
            else Remote = GetRemote("EggHatchService", "Hatch", false) end
            task.wait(0.25)
        end
    end)
end)

TabEggs:Section("Premium Rewards")
if IsPremium then
    TabEggs:Toggle("Auto Claim Exclusive Egg (OP)", false, function(Value)
        Flags.AutoClaimExclusive = Value
        local Remote = GetRemote("OnlineRewardService", "ClaimOnlineQuestReward", true)
        task.spawn(function()
            while Flags.AutoClaimExclusive do
                if Remote then pcall(function() Remote:InvokeServer() end)
                else Remote = GetRemote("OnlineRewardService", "ClaimOnlineQuestReward", true) end
                task.wait(5)
            end
        end)
    end)
else
    TabEggs:Button("ðŸ”’ Auto Exclusive Egg (PREMIUM)", function()
        Library:Notify("Access Denied", "Premium Only", 3)
    end)
end

-- =================================================================
-- TAB: SHOP
-- =================================================================
local TabShop = Window:Tab("Shop", "rbxassetid://3926305904")
local VendingItems = { "WPN_101", "WPN_102", "Potion_DoubleWins", "Potion_SuperLucky", "KingSlime" }

TabShop:Section("Vending Machine")

TabShop:Dropdown("Item", VendingItems, "WPN_101", function(val)
    Flags.VendingItem = val
end)

TabShop:Toggle("Auto Buy Item", false, function(Value)
    Flags.AutoBuy = Value
    local Remote = GetRemote("PurchaseService", "PromptPurchase", false)
    task.spawn(function()
        while Flags.AutoBuy and task.wait(0.5) do
            if Remote then pcall(function() Remote:Fire(Flags.VendingItem) end)
            else Remote = GetRemote("PurchaseService", "PromptPurchase", false) end
        end
    end)
end)

TabShop:Section("Premium Crates")
if IsPremium then
    TabShop:Dropdown("Select Crate", {"Crate_1", "Crate_2"}, "Crate_1", function(val)
        Flags.SelectedCrate = val
    end)

    TabShop:Toggle("Auto Open Crate (OP)", false, function(Value)
        Flags.AutoCrate = Value
        local Remote = GetRemote("ItemCrateService", "UnboxCrate", false)
        task.spawn(function()
            while Flags.AutoCrate and task.wait(0.5) do
                if Remote then pcall(function() Remote:FireServer(Flags.SelectedCrate) end)
                else Remote = GetRemote("ItemCrateService", "UnboxCrate", false) end
            end
        end)
    end)
else
    TabShop:Button("ðŸ”’ Auto Open Crate (PREMIUM)", function()
        Library:Notify("Access Denied", "Premium Only", 3)
    end)
end

-- =================================================================
-- TAB: MISC
-- =================================================================
local TabMisc = Window:Tab("Misc", "rbxassetid://3926305904")

TabMisc:Button("Anti-AFK (Low Render)", function()
    RunService:Set3dRenderingEnabled(false)
    LocalPlayer.Idled:connect(function()
        VirtualUser:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
        wait(1)
        VirtualUser:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    end)
    Library:Notify("Anti-AFK", "Enabled & Low Render Mode", 3)
end)

TabMisc:Button("Restore Rendering", function()
    RunService:Set3dRenderingEnabled(true)
    Library:Notify("Graphics", "Rendering Restored", 3)
end)

Library:Notify("SlenderHub", "Script Loaded Successfully", 5)
