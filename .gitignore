--[[
    SlenderHub | V2.9 - Tap Simulator [SlenderWind Edition]
    Architect: Senior Lead Developer
    UI Library: SlenderWind V5 (Internal)
]]

-- // 1. SYSTEM CHECK & LIBRARY LOAD \\ --
if getgenv().SlenderHubLoaded then 
    -- Notification is handled by the UI library internally usually, but we return to be safe
    return 
end
getgenv().SlenderHubLoaded = true

local SlenderWind = loadstring(game:HttpGet("https://raw.githubusercontent.com/SlenderYt567/sc/refs/heads/main/SlenderWindV5.lua"))()

local AccessLevel = getgenv().SlenderHubAccessLevel or "Free" 
local IsPremium = (AccessLevel == "Premium")

-- // 2. CORE SERVICES \\ --
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local CollectionService = game:GetService("CollectionService")
local LocalPlayer = Players.LocalPlayer

-- // 3. SECURITY BYPASS \\ --
local oldNamecall
oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
    if getnamecallmethod() == "FireServer" and self.Name == "GameAnalyticsError" then return nil end
    return oldNamecall(self, ...)
end)

-- // 4. MODULE INJECTION & DATA \\ --
local M = {}
local BackupEggs = {
    -- Main Eggs (1-18)
    "Basic", "Acorn", "Safari", "Forest", "Snowman", "Cactus", 
    "Poison", "Holy", "Sakura", "Elemental", "Magma", "Candy", 
    "Atlantis", "Space", "Moonflower", "Starry", "Cryo", 
    "Infernal", "Divine",
    
    -- Event Eggs
    "5M Event", "Christmas Event", "New Years Event", 
    "Void Event", "Lightning Event",
    
    -- Exclusive/Robux Eggs
    "Chronos Egg", "Evil Xmas Egg", "Cyborg Egg", "Royal Egg",
    "Volcanic", "Frozen", "Temple", "Tropical", "Angelic", "Samurai"
}
local DataCache = { 
    Eggs = BackupEggs, 
    Portals = {"Main", "Space"}, 
    Zones = {"Spawn", "Forest"}
}

local function InjectModules()
    local s, e = pcall(function()
        M.Net = require(ReplicatedStorage.Modules.Network)
        M.Rep = require(ReplicatedStorage.Game.Replication)
        pcall(function() M.Eggs = require(ReplicatedStorage.Game.Eggs) end)
        pcall(function() M.Portals = require(ReplicatedStorage.Game.Portals) end)
        
        -- Dynamic Egg Scraper
        if M.Eggs then
            local foundEggs = {}
            for eggName, _ in pairs(M.Eggs) do
                table.insert(foundEggs, eggName)
            end
            table.sort(foundEggs)
            DataCache.Eggs = foundEggs
        end

        if M.Portals then
            for n,_ in pairs(M.Portals) do table.insert(DataCache.Portals, n) end
            table.sort(DataCache.Portals)
        end
        
        -- Load Worlds data
        pcall(function() 
            M.Worlds = require(ReplicatedStorage.Game.Worlds)
            if M.Worlds then
                DataCache.Portals = {}
                for worldName, _ in pairs(M.Worlds) do 
                    table.insert(DataCache.Portals, worldName) 
                end
                table.sort(DataCache.Portals)
            end
        end)
    end)
    if not s then warn("SlenderHub: Module Injection Failed") end
end
InjectModules()

-- // 5. HELPER FUNCTIONS \\ --
local function UnlockGamepasses()
    if M.Rep and M.Rep.Data then
        local GP = M.Rep.Data.Gamepasses or {}
        GP["x3Egg"] = true; GP["x8Egg"] = true; GP["FasterEgg"] = true
        GP["AutoClicker"] = true; GP["Luck"] = true
        M.Rep.Data.Gamepasses = GP
    end
end
task.spawn(UnlockGamepasses)

-- // 6. GLOBAL FLAGS \\ --
getgenv().Flags = {
    AutoTap = false, AutoRebirth = false, RebirthAmt = 1,
    AutoHatch = false, Egg = "Basic", HatchAmt = 1,
    AutoDig = false, AutoVoidSpin = false,
    AutoGolden = false, AutoRainbow = false, AutoVoid = false,
    Sniper = false, AutoPotions = false,
    DeleteFilter = {["Common"]=false, ["Uncommon"]=false, ["Rare"]=false},
    GodTap = false, NuclearHatch = false
}

-- // 7. UI CONSTRUCTION \\ --
local Window = SlenderWind.Window({
    Name = "SlenderHub | Tap Sim",
    KeySystem = false,
    Theme = {
        Accent = Color3.fromRGB(0, 255, 110), -- SlenderHub Green
        MainBg = Color3.fromRGB(18, 18, 22),
        Sidebar = Color3.fromRGB(23, 23, 27)
    }
})

Window:Notify("System", "SlenderHub V2.9 Loaded", 3)

-- ==================================================================
-- [TAB] üëë PREMIUM
-- ==================================================================
local TabPrem = Window:Tab("Premium", "rbxassetid://3926305904") -- Generic Icon

TabPrem:Section("God Mode Features")

if IsPremium then
    TabPrem:Toggle("GOD TAP (Safe Mode)", false, function(V)
        getgenv().Flags.GodTap = V
        if V then
            task.spawn(function()
                while getgenv().Flags.GodTap do
                    for i = 1, 20 do 
                        M.Net:FireServer("Tap", true, false, true) 
                    end
                    task.wait(0.05)
                end
            end)
        end
    end)

    TabPrem:Toggle("NUCLEAR HATCH (Fast)", false, function(V)
        getgenv().Flags.NuclearHatch = V
        if V then
            for i=1, 3 do 
                task.spawn(function()
                    while getgenv().Flags.NuclearHatch do
                        local filter = {}
                        for r, on in pairs(getgenv().Flags.DeleteFilter) do if on then filter[r]=true end end
                        M.Net:InvokeServer("OpenEgg", getgenv().Flags.Egg, getgenv().Flags.HatchAmt, filter)
                        task.wait()
                    end
                end)
            end
        end
    end)
else
    TabPrem:Label("Upgrade to Premium for GOD TAP")
    TabPrem:Label("Upgrade to Premium for NUCLEAR HATCH")
end

-- ==================================================================
-- [TAB] FARM
-- ==================================================================
local TabFarm = Window:Tab("Farm", "rbxassetid://3926305904")

TabFarm:Section("Main Loop")

TabFarm:Toggle("Auto Tap (Normal)", false, function(V)
    getgenv().Flags.AutoTap = V
    if V then
        task.spawn(function()
            while getgenv().Flags.AutoTap do
                if not getgenv().Flags.GodTap then
                    for i=1, 5 do M.Net:FireServer("Tap", true, false, true) end
                end
                task.wait(0.1)
            end
        end)
    end
end)

TabFarm:Toggle("Auto Rebirth", false, function(V)
    getgenv().Flags.AutoRebirth = V
    task.spawn(function()
        while getgenv().Flags.AutoRebirth do
            M.Net:InvokeServer("Rebirth", 1, getgenv().Flags.RebirthAmt)
            task.wait(0.5)
        end
    end)
end)

TabFarm:Section("Minigames & Events")

TabFarm:Toggle("Auto Dig (Instant Win)", false, function(V)
    getgenv().Flags.AutoDig = V
    task.spawn(function()
        while getgenv().Flags.AutoDig do
            pcall(function() 
                M.Net:InvokeServer("StartMinigame", "DigGame") 
                task.wait(0.2)
                M.Net:InvokeServer("FinishMinigame", "DigGame")
            end)
            task.wait(1)
        end
    end)
end)

TabFarm:Toggle("Auto Void Spin", false, function(V)
    getgenv().Flags.AutoVoidSpin = V
    task.spawn(function()
        while getgenv().Flags.AutoVoidSpin do
            pcall(function() 
                M.Net:InvokeServer("VoidSpinWheel") 
            end)
            task.wait(2)
        end
    end)
end)

-- ==================================================================
-- [TAB] PETS & CRAFTING
-- ==================================================================
local TabPets = Window:Tab("Pets", "rbxassetid://3926305904")

TabPets:Section("Hatching")

TabPets:Dropdown("Select Egg", DataCache.Eggs, "Basic", function(val)
    getgenv().Flags.Egg = val
end)

TabPets:Dropdown("Hatch Mode", {"1", "3", "8"}, "1", function(val)
    getgenv().Flags.HatchAmt = tonumber(val)
    UnlockGamepasses()
end)

TabPets:Toggle("Auto Hatch", false, function(V)
    getgenv().Flags.AutoHatch = V
    if V then
        task.spawn(function()
            while getgenv().Flags.AutoHatch do
                if not getgenv().Flags.NuclearHatch then
                    local filter = {}
                    for r, on in pairs(getgenv().Flags.DeleteFilter) do if on then filter[r]=true end end
                    M.Net:InvokeServer("OpenEgg", getgenv().Flags.Egg, getgenv().Flags.HatchAmt, filter)
                end
                task.wait(getgenv().Flags.HatchAmt == 8 and 0.3 or 0.1)
            end
        end)
    end
end)

TabPets:Section("Smart Crafting")

TabPets:Toggle("Auto Craft Golden (Instant)", false, function(V)
    getgenv().Flags.AutoGolden = V
    task.spawn(function()
        while getgenv().Flags.AutoGolden do
            if M.Rep.Data and M.Rep.Data.Pets then
                local groups = {}
                for id, p in pairs(M.Rep.Data.Pets) do
                    if (p.Tier == "Normal" or p.Tier == nil) and not p.Locked and not p.Equipped then
                        if not groups[p.Name] then groups[p.Name] = {} end
                        table.insert(groups[p.Name], id)
                    end
                end
                for _, ids in pairs(groups) do
                    while #ids >= 5 do
                        local batch = {table.remove(ids), table.remove(ids), table.remove(ids), table.remove(ids), table.remove(ids)}
                        pcall(function() M.Net:InvokeServer("CraftPets", batch) end)
                        task.wait(0.05)
                    end
                end
            end
            task.wait(1)
        end
    end)
end)

TabPets:Toggle("Auto Craft Rainbow (Machine)", false, function(V)
    getgenv().Flags.AutoRainbow = V
    task.spawn(function()
        while getgenv().Flags.AutoRainbow do
            -- 1. Auto Claim
            if M.Rep.Data.CraftingPets and M.Rep.Data.CraftingPets.Rainbow then
                for id, data in pairs(M.Rep.Data.CraftingPets.Rainbow) do
                    if data.EndTime <= Workspace:GetServerTimeNow() then
                        M.Net:InvokeServer("ClaimRainbow", id)
                    end
                end
            end

            -- 2. Check Slots
            local activeCrafts = 0
            if M.Rep.Data.CraftingPets and M.Rep.Data.CraftingPets.Rainbow then
                for _ in pairs(M.Rep.Data.CraftingPets.Rainbow) do activeCrafts = activeCrafts + 1 end
            end

            -- 3. Start Craft
            if activeCrafts < 3 and M.Rep.Data and M.Rep.Data.Pets then
                local groups = {}
                for id, p in pairs(M.Rep.Data.Pets) do
                    if p.Tier == "Golden" and not p.Locked and not p.Equipped then
                        if not groups[p.Name] then groups[p.Name] = {} end
                        table.insert(groups[p.Name], id)
                    end
                end
                for _, ids in pairs(groups) do
                    if activeCrafts >= 3 then break end
                    if #ids >= 5 then
                        local batch = {ids[1], ids[2], ids[3], ids[4], ids[5]}
                        local s, e = pcall(function() M.Net:InvokeServer("StartRainbow", batch) end)
                        if s then activeCrafts = activeCrafts + 1; task.wait(0.5) end
                    end
                end
            end
            task.wait(2)
        end
    end)
end)

TabPets:Toggle("Auto Craft Void (Instant)", false, function(V)
    getgenv().Flags.AutoVoid = V
    task.spawn(function()
        while getgenv().Flags.AutoVoid do
            if M.Rep.Data and M.Rep.Data.Pets then
                local groups = {}
                for id, p in pairs(M.Rep.Data.Pets) do
                    if p.Tier == "Rainbow" and not p.Locked and not p.Equipped then
                        if not groups[p.Name] then groups[p.Name] = {} end
                        table.insert(groups[p.Name], id)
                    end
                end
                for _, ids in pairs(groups) do
                    while #ids >= 3 do
                        local batch = {table.remove(ids), table.remove(ids), table.remove(ids)}
                        pcall(function() M.Net:InvokeServer("StartVoid", batch) end) 
                        pcall(function() M.Net:InvokeServer("CraftVoid", batch) end)
                        task.wait(0.1)
                    end
                end
            end
            task.wait(1)
        end
    end)
end)

-- ==================================================================
-- [TAB] WORLD
-- ==================================================================
local TabWorld = Window:Tab("World", "rbxassetid://3926305904")

TabWorld:Section("Teleports")

-- World Teleports
for _, world in ipairs(DataCache.Portals) do
    TabWorld:Button("üåç " .. world .. " World", function()
        pcall(function()
            M.Net:InvokeServer("TeleportWorld", world)
            M.Net:InvokeServer("TeleportZone", world)
        end)
    end)
end

-- Zone Teleports
if DataCache.Zones then
    TabWorld:Section("Zones")
    for _, zone in ipairs(DataCache.Zones) do
        TabWorld:Button("üìç " .. zone, function()
            pcall(function()
                M.Net:InvokeServer("TeleportZone", zone)
            end)
        end)
    end
end

TabWorld:Section("World Features")

TabWorld:Toggle("Auto Buy World Access", false, function(V)
    getgenv().Flags.AutoWorld = V
    if V then
        task.spawn(function()
            while getgenv().Flags.AutoWorld do
                pcall(function()
                    M.Net:InvokeServer("BuyWorld", "Space")
                end)
                task.wait(5)
            end
        end)
    end
end)

TabWorld:Section("Automation")

TabWorld:Toggle("Infinity Chest Sniper", false, function(V)
    getgenv().Flags.Sniper = V
    task.spawn(function()
        while getgenv().Flags.Sniper do
            local target
            for _, o in ipairs(CollectionService:GetTagged("Breakable")) do
                if o.Name == "InfinityChest" and o:FindFirstChild("ClickDetector") then target = o break end
            end
            if target then
                LocalPlayer.Character:PivotTo(target:GetPivot())
                fireclickdetector(target.ClickDetector)
            end
            task.wait(0.5)
        end
    end)
end)

TabWorld:Toggle("Auto Use Potions", false, function(V)
    getgenv().Flags.AutoPotions = V
    task.spawn(function()
        while getgenv().Flags.AutoPotions do
            if M.Rep.Data and M.Rep.Data.Items then
                for id, item in pairs(M.Rep.Data.Items) do
                    if string.find(item.Name or "", "Potion") or string.find(item.Name or "", "Boost") then
                        M.Net:InvokeServer("UseItem", id)
                    end
                end
            end
            task.wait(5)
        end
    end)
end)
