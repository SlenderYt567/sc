--[[
    SlenderHub | V3.0 - Tap Simulator [Architect Edition]
    Updated with: Decompiled Data (Eggs, Bank, Worlds)
    UI Library: SlenderWind V5 (Internal)
]]

-- // 1. SYSTEM CHECK & LIBRARY LOAD \\ --
if getgenv().SlenderHubLoaded then return end
getgenv().SlenderHubLoaded = true

local SlenderWind = loadstring(game:HttpGet("https://raw.githubusercontent.com/SlenderYt567/sc/refs/heads/main/SlenderWindV5.lua"))()

-- // 2. DECOMPILED DATA INTEGRATION (HARDCODED FALLBACKS) \\ --
-- Extracted from Konstant V2.1 Decompiler Output
local Database = {
    Worlds = {
        Main = Vector3.new(-142.74, 221.761, 259.863),
        Space = Vector3.new(1204.25, 652.393, -13267)
    },
    Bank = {
        MaxLevel = 4,
        Costs = {5000000000, 25000000000, 75000000000, 250000000000}
    },
    -- Sorted by Index from your dump
    Eggs = {
        {Name = "Basic", Index = 1}, {Name = "Acorn", Index = 2}, {Name = "Safari", Index = 3},
        {Name = "Snowman", Index = 4}, {Name = "Cactus", Index = 5}, {Name = "Poison", Index = 6},
        {Name = "Holy", Index = 7}, {Name = "Sakura", Index = 8}, {Name = "Elemental", Index = 9},
        {Name = "Magma", Index = 10}, {Name = "Candy", Index = 11}, {Name = "Atlantis", Index = 12},
        {Name = "Space", Index = 13}, {Name = "Moonflower", Index = 14}, {Name = "Starry", Index = 15},
        {Name = "Cryo", Index = 16}, {Name = "Infernal", Index = 17}, {Name = "Divine", Index = 18},
        -- Events (Index 1000)
        {Name = "5M Event", Index = 1000}, {Name = "Christmas Event", Index = 1000},
        {Name = "New Years Event", Index = 1000}, {Name = "Void Event", Index = 1000},
        {Name = "Lightning Event", Index = 1000},
        -- Exclusives/Robux
        {Name = "Chronos Egg", Index = 1001}, {Name = "Volcanic", Index = 1002},
        {Name = "Frozen", Index = 1003}, {Name = "Temple", Index = 1004},
        {Name = "Tropical", Index = 1005}, {Name = "Angelic", Index = 1006},
        {Name = "Samurai", Index = 1007}, {Name = "Evil Xmas Egg", Index = 1010},
        {Name = "Cyborg Egg", Index = 1011}, {Name = "Royal Egg", Index = 1011}
    }
}

-- // 3. CORE SERVICES \\ --
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

-- // 4. SECURITY BYPASS \\ --
local oldNamecall
oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
    local method = getnamecallmethod()
    if method == "FireServer" and self.Name == "GameAnalyticsError" then return nil end
    return oldNamecall(self, ...)
end)

-- // 5. MODULE INJECTION \\ --
local M = {}
local function InjectModules()
    local s, e = pcall(function()
        M.Net = require(ReplicatedStorage.Modules.Network)
        M.Rep = require(ReplicatedStorage.Game.Replication)
        -- We try to require game modules, but we rely on our Database if they fail or for sorting
        pcall(function() M.Eggs = require(ReplicatedStorage.Game.Eggs) end)
    end)
    if not s then warn("SlenderHub: Module Injection Failed - Using Database Fallback") end
end
InjectModules()

-- // 6. DATA PROCESSING \\ --
local EggList = {}
-- Sort eggs by Index (Progression) instead of Alphabetical
table.sort(Database.Eggs, function(a, b)
    if a.Index == b.Index then return a.Name < b.Name end
    return a.Index < b.Index
end)
for _, egg in ipairs(Database.Eggs) do
    table.insert(EggList, egg.Name)
end

-- // 7. GLOBAL FLAGS \\ --
getgenv().Flags = {
    AutoTap = false, AutoRebirth = false, RebirthAmt = 1,
    AutoHatch = false, Egg = "Basic", HatchAmt = 1,
    AutoDig = false, AutoVoidSpin = false,
    AutoUpgradeBank = false,
    GodTap = false
}

-- // 8. UI CONSTRUCTION \\ --
local Window = SlenderWind.Window({
    Name = "SlenderHub V3.0 | Tap Sim",
    KeySystem = false,
    Theme = {
        Accent = Color3.fromRGB(255, 85, 85), -- Architect Red
        MainBg = Color3.fromRGB(15, 15, 20),
        Sidebar = Color3.fromRGB(20, 20, 25)
    }
})

Window:Notify("System", "Decompiled Data Loaded Successfully", 4)

-- ==================================================================
-- [TAB] FARM
-- ==================================================================
local TabFarm = Window:Tab("Farm", "rbxassetid://3926305904")

TabFarm:Section("Main Loop")

TabFarm:Toggle("Auto Tap (Fast)", false, function(V)
    getgenv().Flags.AutoTap = V
    if V then
        task.spawn(function()
            while getgenv().Flags.AutoTap do
                -- Optimized: Fire 5 times per tick instead of loop spam to prevent crash
                for i=1, 5 do M.Net:FireServer("Tap", true, false, true) end
                task.wait(0.05)
            end
        end)
    end
end)

TabFarm:Toggle("Auto Rebirth", false, function(V)
    getgenv().Flags.AutoRebirth = V
    task.spawn(function()
        while getgenv().Flags.AutoRebirth do
            M.Net:InvokeServer("Rebirth", 1, getgenv().Flags.RebirthAmt)
            task.wait(0.5)
        end
    end)
end)

TabFarm:Section("Bank Automation")

TabFarm:Toggle("Auto Upgrade Bank (Max Lvl 4)", false, function(V)
    getgenv().Flags.AutoUpgradeBank = V
    task.spawn(function()
        while getgenv().Flags.AutoUpgradeBank do
            pcall(function()
                -- Logic based on Decompiled Bank Module
                if M.Rep.Data and M.Rep.Data.Bank then
                    local currentLvl = M.Rep.Data.Bank.Level or 1
                    if currentLvl < Database.Bank.MaxLevel then
                        M.Net:InvokeServer("UpgradeBank")
                    end
                end
            end)
            task.wait(2)
        end
    end)
end)

-- ==================================================================
-- [TAB] EGGS (UPDATED)
-- ==================================================================
local TabPets = Window:Tab("Eggs", "rbxassetid://3926305904")

TabPets:Section("Hatching System")

TabPets:Dropdown("Select Egg (Sorted by Progression)", EggList, "Basic", function(val)
    getgenv().Flags.Egg = val
end)

TabPets:Dropdown("Hatch Amount", {"1", "3", "8"}, "1", function(val)
    getgenv().Flags.HatchAmt = tonumber(val)
    -- Spoof Gamepasses locally to allow UI selection
    if M.Rep.Data and M.Rep.Data.Gamepasses then
        M.Rep.Data.Gamepasses["x3Egg"] = true
        M.Rep.Data.Gamepasses["x8Egg"] = true
    end
end)

TabPets:Toggle("Auto Hatch", false, function(V)
    getgenv().Flags.AutoHatch = V
    if V then
        task.spawn(function()
            while getgenv().Flags.AutoHatch do
                M.Net:InvokeServer("OpenEgg", getgenv().Flags.Egg, getgenv().Flags.HatchAmt, {})
                task.wait(0.1)
            end
        end)
    end
end)

-- ==================================================================
-- [TAB] WORLD (COORDINATE BYPASS)
-- ==================================================================
local TabWorld = Window:Tab("World", "rbxassetid://3926305904")

TabWorld:Section("Direct Teleports (Bypass)")

TabWorld:Button("Teleport to Main World", function()
    local char = LocalPlayer.Character
    if char and char.PrimaryPart then
        char:SetPrimaryPartCFrame(CFrame.new(Database.Worlds.Main))
    end
    M.Net:InvokeServer("TeleportWorld", "Main")
end)

TabWorld:Button("Teleport to Space World (Force)", function()
    -- Uses Vector3 from Decompiled 'Worlds' Module
    local char = LocalPlayer.Character
    if char and char.PrimaryPart then
        char:SetPrimaryPartCFrame(CFrame.new(Database.Worlds.Space))
    end
    -- Try legitimate way too, but CFrame usually bypasses
    M.Net:InvokeServer("TeleportWorld", "Space")
end)

TabWorld:Section("Events")

TabWorld:Toggle("Auto Void Spin", false, function(V)
    getgenv().Flags.AutoVoidSpin = V
    task.spawn(function()
        while getgenv().Flags.AutoVoidSpin do
            M.Net:InvokeServer("VoidSpinWheel")
            task.wait(2)
        end
    end)
end)

TabWorld:Toggle("Auto Dig Minigame", false, function(V)
    getgenv().Flags.AutoDig = V
    task.spawn(function()
        while getgenv().Flags.AutoDig do
            M.Net:InvokeServer("StartMinigame", "DigGame") 
            task.wait(0.2)
            M.Net:InvokeServer("FinishMinigame", "DigGame")
            task.wait(1)
        end
    end)
end)

-- // 9. CLEANUP \\ --
Window:Notify("Architect", "Egg Database Updated: " .. #EggList .. " Eggs Found.", 5)
