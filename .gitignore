--[[
    Script Generated by BloxMinds AI
    Game Analysis: Clicker Simulator (Generic)
    Decompiled Logic Integrated:
    - Remotes: ClickEvent, Rebirth, MerchantBuy, UseItem
    - Paths: workspace.HiddenChests, workspace.Collectables
]]

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- // SAFETY CHECK //
if getgenv().BloxMindsLoaded then
    Rayfield:Notify({
        Title = "Already Loaded",
        Content = "The script is already running!",
        Duration = 3,
        Image = "alert-triangle"
    })
    return
end
getgenv().BloxMindsLoaded = true

-- // SERVICES //
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")

local LocalPlayer = Players.LocalPlayer
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
local Events = Remotes:WaitForChild("Events")

-- // VARIABLES & FLAGS //
local Flags = {
    AutoClick = false,
    AutoRebirth = false,
    RebirthAmount = 1,
    AutoCollect = false,
    AutoChests = false,
    AutoMerchant = false,
    RemoveAnim = false
}

-- // UI SETUP //
local Window = Rayfield:CreateWindow({
    Name = "BloxMinds Hub | Clicker Sim",
    Icon = "gamepad-2",
    LoadingTitle = "Initializing...",
    LoadingSubtitle = "By BloxMinds AI",
    Theme = "Default",
    ConfigurationSaving = {
        Enabled = true,
        FileName = "BloxMinds_ClickerConfig"
    },
    KeySystem = false
})

-- // TABS //
local MainTab = Window:CreateTab("Main", "mouse-pointer-2")
local FarmTab = Window:CreateTab("Farming", "coins")
local ShopTab = Window:CreateTab("Merchants", "shopping-cart")
local MiscTab = Window:CreateTab("Misc", "settings")

-- // MAIN TAB //

local MainSection = MainTab:CreateSection("Clicking")

MainTab:CreateToggle({
    Name = "Auto Click (Fast)",
    CurrentValue = false,
    Flag = "AutoClick",
    Callback = function(Value)
        Flags.AutoClick = Value
        if Value then
            task.spawn(function()
                while Flags.AutoClick do
                    -- Directly firing the remote found in ClickClient
                    pcall(function()
                        Events.ClickEvent:FireServer()
                    end)
                    task.wait() -- Fastest safe speed
                end
            end)
        end
    end
})

local RebirthSection = MainTab:CreateSection("Rebirth")

MainTab:CreateSlider({
    Name = "Rebirth Button Index",
    Range = {1, 50},
    Increment = 1,
    Suffix = "Index",
    CurrentValue = 1,
    Flag = "RebirthAmt",
    Callback = function(Value)
        Flags.RebirthAmount = Value
    end
})

MainTab:CreateToggle({
    Name = "Auto Rebirth",
    CurrentValue = false,
    Flag = "AutoRebirth",
    Callback = function(Value)
        Flags.AutoRebirth = Value
        if Value then
            task.spawn(function()
                while Flags.AutoRebirth do
                    pcall(function()
                        -- Firing remote found in Rebirth module
                        Events.Rebirth:FireServer(Flags.RebirthAmount)
                    end)
                    task.wait(0.5)
                end
            end)
        end
    end
})

-- // FARMING TAB //

local CollectSection = FarmTab:CreateSection("Event Currency")

FarmTab:CreateToggle({
    Name = "Auto Collect Candycorn",
    CurrentValue = false,
    Flag = "AutoCollect",
    Callback = function(Value)
        Flags.AutoCollect = Value
        if Value then
            task.spawn(function()
                while Flags.AutoCollect do
                    pcall(function()
                        local Collectables = Workspace:FindFirstChild("Collectables")
                        if Collectables and Collectables:FindFirstChild("Candycorn") then
                            for _, v in pairs(Collectables.Candycorn:GetChildren()) do
                                if not Flags.AutoCollect then break end
                                if v:IsA("Model") and v.PrimaryPart and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                    -- Teleport to collect
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = v.PrimaryPart.CFrame
                                    task.wait(0.15) -- Wait for server to register collection
                                end
                            end
                        end
                    end)
                    task.wait(0.5)
                end
            end)
        end
    end
})

local ChestSection = FarmTab:CreateSection("Hidden Chests")

FarmTab:CreateToggle({
    Name = "Auto Claim Hidden Chests",
    CurrentValue = false,
    Flag = "AutoChests",
    Callback = function(Value)
        Flags.AutoChests = Value
        if Value then
            task.spawn(function()
                while Flags.AutoChests do
                    pcall(function()
                        local Chests = Workspace:FindFirstChild("HiddenChests")
                        if Chests then
                            for _, v in pairs(Chests:GetChildren()) do
                                if not Flags.AutoChests then break end
                                -- Check if chest is already claimed (based on local value logic in decomp)
                                local claimed = false
                                if LocalPlayer:FindFirstChild("HiddenChests") and LocalPlayer.HiddenChests:FindFirstChild(v.Name) then
                                    if LocalPlayer.HiddenChests[v.Name].Value == 1 then claimed = true end
                                end

                                if not claimed and v:FindFirstChild("Top") and LocalPlayer.Character then
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = v.Top.CFrame
                                    -- Simulate click if needed, but usually proximity triggers it or we can fire click detector
                                    if v:FindFirstChild("ClickDetector", true) then
                                        fireclickdetector(v:FindFirstChild("ClickDetector", true))
                                    end
                                    task.wait(1)
                                end
                            end
                        end
                    end)
                    task.wait(2)
                end
            end)
        end
    end
})

-- // SHOP TAB //

ShopTab:CreateSection("Merchant Sniper")

ShopTab:CreateToggle({
    Name = "Auto Buy From Current Merchant",
    CurrentValue = false,
    Flag = "AutoMerchant",
    Callback = function(Value)
        Flags.AutoMerchant = Value
        if Value then
            task.spawn(function()
                while Flags.AutoMerchant do
                    -- Logic derived from Merchant module
                    -- We need to find which merchant is active or loop all known ones
                    -- For safety, we try to buy the first 5 slots of the active merchant UI
                    pcall(function()
                        local UI = LocalPlayer.PlayerGui.UI.Base.Frames.Merchant
                        if UI.Visible then
                            -- Try to buy items 1 through 6
                            -- The remote requires (MerchantName, ItemID)
                            -- We can scrape the name from the UI Title or just try generic names if known
                            -- Based on decomp, CurrentMerchant is stored in the module, but we can't access upvalues easily.
                            -- However, the remote is exposed.
                            
                            -- We will try to fire for the merchant currently open in GUI
                            -- This is a "Blind Fire" approach based on UI visibility
                            local MerchantTitle = UI.Main.Title.Text
                            -- We need to map Title to Internal Name, or just wait for user to open it
                            -- Alternatively, we iterate the 'Stocks' if we could access the module.
                            
                            -- Simple approach: Click the buttons in the UI
                            for _, v in pairs(UI.Main.ScrollingFrame:GetChildren()) do
                                if v:IsA("Frame") and v.Name ~= "Template" and v.Visible then
                                    if v:FindFirstChild("Button") and v.Button:FindFirstChild("Click") then
                                        -- Use firesignal if supported, or just fire remote if we knew the merchant ID
                                        -- Since we don't know the exact Merchant ID string without upvalues, 
                                        -- we rely on the user having the menu open or we simulate clicks.
                                        for _, connection in pairs(getconnections(v.Button.Click.Activated)) do
                                            connection:Fire()
                                        end
                                    end
                                end
                            end
                        end
                    end)
                    task.wait(0.5)
                end
            end)
        end
    end
})

ShopTab:CreateButton({
    Name = "Use All Potions (Lucky/Speed)",
    Callback = function()
        -- Loop through known potion names from BrewingData/Items
        local Potions = {"LuckyI", "LuckyII", "LuckyIII", "LuckyIV", "LuckyV", "SpeedI", "SpeedII", "SpeedIII", "SpeedIV", "SpeedV"}
        for _, potion in pairs(Potions) do
            Events.ItemsEvents.UseItem:FireServer(potion)
            task.wait(0.1)
        end
        Rayfield:Notify({Title = "Potions", Content = "Attempted to consume all potions.", Duration = 3})
    end
})

-- // MISC TAB //

MiscTab:CreateToggle({
    Name = "Remove Egg Animation",
    CurrentValue = false,
    Flag = "NoEggAnim",
    Callback = function(Value)
        Flags.RemoveAnim = Value
        if Value then
            -- Hooking the OpenEggClient to destroy the animation immediately
            -- This is a basic method. Advanced method involves hooking the module.
            local EggAnimFolder = Workspace:FindFirstChild("_EggAnim") -- Found in EggAnimation decomp
            if EggAnimFolder then
                EggAnimFolder.ChildAdded:Connect(function(child)
                    if Flags.RemoveAnim then
                        task.wait()
                        child:Destroy()
                    end
                end)
            end
        end
    end
})

MiscTab:CreateSection("Character")

MiscTab:CreateSlider({
    Name = "WalkSpeed",
    Range = {16, 300},
    Increment = 1,
    CurrentValue = 16,
    Callback = function(Value)
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = Value
        end
    end
})

MiscTab:CreateToggle({
    Name = "Anti-AFK",
    CurrentValue = false,
    Callback = function(Value)
        if Value then
            LocalPlayer.Idled:Connect(function()
                VirtualUser:CaptureController()
                VirtualUser:ClickButton2(Vector2.new())
            end)
        end
    end
})

Rayfield:LoadConfiguration()
